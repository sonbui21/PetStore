@{
	var version = FileVersionInfo.GetVersionInfo(typeof(Duende.IdentityServer.Hosting.IdentityServerMiddleware).Assembly.Location).ProductVersion.Split('+').First();
}
@model DiagnosticsViewModel

<div class="container">
	<div class="row justify-content-center" style="padding-top:100px; padding-bottom:100px">
		<div class="col-lg-8 col-md-10">
			<h1 class="text-center">
				@{
					string name = "";
					if (Model != null)
					{
						var principal = Model.AuthenticateResult?.Principal;

						name = principal.FindFirst("name")?.Value ?? "";
					}

				}

				Welcome @name to IdentityServer
				<small class="text-muted">(version @version)</small>
			</h1>

			<ul>
				@if (string.IsNullOrEmpty(name))
				{
					<li>
						Click <a href="~/account/login">here</a> to login.
					</li>
				}

				<li>
					IdentityServer publishes a
					<a href="~/.well-known/openid-configuration">discovery document</a>
					where you can find metadata and links to all the endpoints, key material, etc.
				</li>

				<li>
					Click <a href="~/diagnostics">here</a> to see the claims for your current session.
				</li>
				<li>
					Click <a href="~/grants">here</a> to manage your stored grants.
				</li>

				@if (!string.IsNullOrEmpty(name))
				{
					<li>
						Click <a href="~/account/logout">here</a> to logout.
					</li>
				}

			</ul>
		</div>

	</div>
</div>